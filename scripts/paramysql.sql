CREATE DATABASE PATENTES;
USE PATENTES;

CREATE TABLE COLONIA(
CLAVE_COL INT,
NOM_COL VARCHAR (100),
CONSTRAINT PK_CC PRIMARY KEY (CLAVE_COL))
ENGINE=INNODB;

INSERT INTO COLONIA VALUES (1,'PILOTO');
INSERT INTO COLONIA VALUES (2,'BUENOS AIRES');
INSERT INTO COLONIA VALUES (3,'DOCTORES');

CREATE TABLE DELEGACION(
CLAVE_DEL INT,
NOM_DEL VARCHAR(100),
CONSTRAINT PK_CD PRIMARY KEY (CLAVE_DEL))
ENGINE=INNODB;

INSERT INTO DELEGACION VALUES (1,'IZTAPALACRA');
INSERT INTO DELEGACION VALUES (2,'ECATEPUM');
INSERT INTO DELEGACION VALUES (3,'IZTACALCO');

CREATE TABLE TELEFONO(
CLAVE_TEL INT,
TIPO_TEL VARCHAR(100),
CONSTRAINT PK_CT PRIMARY KEY(CLAVE_TEL))
ENGINE=INNODB;

INSERT INTO TELEFONO VALUES (1,'PRIVADO');
INSERT INTO TELEFONO VALUES (2,'CELULAR');
INSERT INTO TELEFONO VALUES (3,'FIJO');

CREATE TABLE CALLE(
CLAVE_CAL INT,
NOM_CAL VARCHAR (100),
CONSTRAINT PK_CC PRIMARY KEY(CLAVE_CAL))
ENGINE=INNODB;

INSERT INTO CALLE VALUES (1,'AYUNTAMIENTO');
INSERT INTO CALLE VALUES (2,'JUSTO SIERRA');
INSERT INTO CALLE VALUES (3,'ENRIQUE DONDE');

CREATE TABLE EMPRESA(
CLAVE_EM INT,
NOM_EM VARCHAR (200),
CC INT ,
CCA INT ,
CD INT ,
CONSTRAINT PK_CE PRIMARY KEY(CLAVE_EM),
CONSTRAINT FK_CC FOREIGN KEY (CC) REFERENCES COLONIA (CLAVE_COL) ON DELETE SET  NULL,
CONSTRAINT FK_Q FOREIGN KEY (CCA) REFERENCES CALLE (CLAVE_CAL) ON DELETE SET  NULL,
CONSTRAINT FK_W FOREIGN KEY (CD) REFERENCES DELEGACION (CLAVE_DEL) ON DELETE SET  NULL)
ENGINE=INNODB;

INSERT INTO EMPRESA VALUES (1,'BIMBO',1,2,3);
INSERT INTO EMPRESA VALUES (2,'GAMESA',2,3,1);
INSERT INTO EMPRESA VALUES (3,'BACARDI',3,1,2);

CREATE TABLE INVENTOR(
CLAVE_INV INT PRIMARY KEY,
NOM_INV VARCHAR(200),
RFC_INV VARCHAR(200),
FECHA_INV VARCHAR (200),
CC2 INT ,
CCA2 INT,
CD2 INT,
CE INT,
CI INT,
CONSTRAINT FK_E FOREIGN KEY(CC2) REFERENCES COLONIA (CLAVE_COL) ON DELETE SET NULL ,
CONSTRAINT FK_R FOREIGN KEY(CCA2) REFERENCES CALLE (CLAVE_CAL) ON DELETE SET NULL,
CONSTRAINT FK_T FOREIGN KEY (CD2)REFERENCES DELEGACION (CLAVE_DEL)ON DELETE SET NULL,
CONSTRAINT FK_Y FOREIGN KEY (CE)REFERENCES EMPRESA (CLAVE_EM)  ON DELETE SET NULL,
CONSTRAINT FK_U FOREIGN KEY (CI)REFERENCES INVENTOR (CLAVE_INV)ON DELETE NO ACTION)
ENGINE=INNODB;

INSERT INTO INVENTOR VALUES (1,'JUAN','JIPJ630612HDFMRN','2015-05-04',1,2,3,1,1);
INSERT INTO INVENTOR VALUES (2,'PEDRO','ROMP781005HDFDND','2017-11-05',2,3,1,2,1);
INSERT INTO INVENTOR VALUES (3,'OMAR','PETO960314HDFRRM','2016-01-30',3,1,2,3,2);

CREATE TABLE PATENTE(
CLAVE_PAN INT,
NOM_PAN VARCHAR (200 ),
FECHA_P VARCHAR(200),
CI2 INT ,
CE2 INT, 
CONSTRAINT FK_IN FOREIGN KEY(CI2) REFERENCES INVENTOR (CLAVE_INV) ON DELETE CASCADE,
CONSTRAINT FK_EM FOREIGN KEY(CE2) REFERENCES EMPRESA (CLAVE_EM)ON DELETE SET NULL)
ENGINE=INNODB;

INSERT INTO PATENTE VALUES (1,'CARRO','2015-04-28',1,2);
INSERT INTO PATENTE VALUES (2,'BICICLETA','2014-09-30',2,3);
INSERT INTO PATENTE VALUES (3,'COMPUTADORA','2017-10-20',3,1);

CREATE TABLE AYUDANTE(
CLAVE_AYU INT PRIMARY KEY,
NOM_AYU VARCHAR(200),
RFC VARCHAR(200),
FECHA_AYU VARCHAR(200),
CC3 INT ,
CCA3 INT,
CD3 INT,
CE3 INT,
CI3 INT,
CONSTRAINT FK_O FOREIGN KEY (CC3) REFERENCES COLONIA (CLAVE_COL) ON DELETE SET  NULL,
CONSTRAINT FK_P FOREIGN KEY (CCA3) REFERENCES CALLE (CLAVE_CAL)ON DELETE SET  NULL,
CONSTRAINT FK_A FOREIGN KEY (CD3) REFERENCES DELEGACION (CLAVE_DEL) ON DELETE SET  NULL,
CONSTRAINT FK_S FOREIGN KEY (CE3) REFERENCES EMPRESA (CLAVE_EM)ON DELETE SET  NULL,
CONSTRAINT FK_D FOREIGN KEY (CI3) REFERENCES INVENTOR (CLAVE_INV)ON DELETE SET  NULL)
ENGINE=INNODB;

INSERT INTO AYUDANTE VALUES (1,'JUAN','LOJJ770428PNN','2018-01-10',1,2,3,1,2);
INSERT INTO AYUDANTE VALUES (2,'CARLOS','SARC980315NCR','2017-02-12',2,3,1,2,3);
INSERT INTO AYUDANTE VALUES (3,'DIEGO','TEVD920722LLG','2014-06-01',3,1,2,3,1);

CREATE TABLE TELAYU(
CA4 INT ,
CT1 INT, 
NUM VARCHAR(10),
CONSTRAINT FK_F FOREIGN KEY (CA4) REFERENCES  AYUDANTE (CLAVE_AYU) ON DELETE CASCADE,
CONSTRAINT FK_G FOREIGN KEY (CT1) REFERENCES TELEFONO (CLAVE_TEL) ON DELETE CASCADE)
ENGINE=INNODB;

INSERT INTO TELAYU VALUES (1,2,'5567432398');
INSERT INTO TELAYU VALUES (2,3,'5543215801');
INSERT INTO TELAYU VALUES (3,1,'5578321202');

CREATE TABLE TELEMP(
CE4 INT, 
CT2 INT, 
NUM2 VARCHAR(10),
CONSTRAINT FK_H FOREIGN KEY (CE4) REFERENCES  EMPRESA (CLAVE_EM) ON DELETE CASCADE,
CONSTRAINT FK_J FOREIGN KEY (CT2) REFERENCES TELEFONO (CLAVE_TEL) ON DELETE CASCADE)
ENGINE=INNODB;

INSERT INTO TELEMP VALUES (2,1,'5543980299');
INSERT INTO TELEMP VALUES (3,2,'5592038192');
INSERT INTO TELEMP VALUES (1,3,'5567591209');

CREATE TABLE TELINV(
CI4 INT, 
CT1 INT, 
NUM VARCHAR(10),
CONSTRAINT FK_K FOREIGN KEY (CI4) REFERENCES  INVENTOR (CLAVE_INV) ON DELETE CASCADE,
CONSTRAINT FK_L FOREIGN KEY (CT1) REFERENCES TELEFONO (CLAVE_TEL) ON DELETE CASCADE)
ENGINE=INNODB;

INSERT INTO TELINV VALUES (1,1,'5567489802');
INSERT INTO TELINV VALUES (2,3,'5543920310');
INSERT INTO TELINV VALUES (3,1,'5501982389');